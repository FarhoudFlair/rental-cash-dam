<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smith Manoeuvre - Rental Cash Damming Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Smith Manoeuvre - Rental Cash Damming Calculator</h1>
        
        <div class="calculator">
            <div class="input-section">
                <h2>Primary Residence</h2>
                <div class="input-group">
                    <label for="homeValue">Home Value ($)</label>
                    <input type="number" id="homeValue" value="500000">
                </div>
                <div class="input-group">
                    <label for="mortgageBalance">Current Mortgage Balance ($)</label>
                    <input type="number" id="mortgageBalance" value="400000">
                </div>
                <div class="input-group">
                    <label for="mortgageRate">Mortgage Interest Rate (%)</label>
                    <input type="number" id="mortgageRate" value="4.5" step="0.01">
                </div>
                <div class="input-group">
                    <label for="mortgageAmortization">Amortization Period (years)</label>
                    <input type="number" id="mortgageAmortization" value="25">
                </div>
                <div class="input-group">
                    <label for="mortgagePaymentFrequency">Payment Frequency</label>
                    <select id="mortgagePaymentFrequency">
                        <option value="monthly">Monthly</option>
                        <option value="biweekly">Bi-weekly</option>
                        <option value="accelerated">Accelerated Bi-weekly</option>
                    </select>
                </div>

                <h2>Rental Property</h2>
                <div class="input-group">
                    <label for="rentalValue">Rental Property Value ($)</label>
                    <input type="number" id="rentalValue" value="400000">
                </div>
                <div class="input-group">
                    <label for="rentalMortgageBalance">Rental Mortgage Balance ($)</label>
                    <input type="number" id="rentalMortgageBalance" value="300000">
                </div>
                <div class="input-group">
                    <label for="rentalMortgageRate">Rental Mortgage Rate (%)</label>
                    <input type="number" id="rentalMortgageRate" value="4.5" step="0.01">
                </div>
                <div class="input-group">
                    <label for="rentalMortgageAmortization">Rental Amortization (years)</label>
                    <input type="number" id="rentalMortgageAmortization" value="25">
                </div>
                <div class="input-group">
                    <label for="monthlyRent">Monthly Rental Income ($)</label>
                    <input type="number" id="monthlyRent" value="2500">
                </div>
                <div class="input-group">
                    <label for="monthlyRentalExpenses">Monthly Rental Expenses (excl. mortgage) ($)</label>
                    <input type="number" id="monthlyRentalExpenses" value="500">
                </div>

                <h2>HELOC & Investment Details</h2>
                <div class="input-group">
                    <label for="helocRate">HELOC Interest Rate (%)</label>
                    <input type="number" id="helocRate" value="6.0" step="0.01">
                </div>
                <div class="input-group">
                    <label for="investmentReturnRate">Expected Investment Return Rate (%)</label>
                    <input type="number" id="investmentReturnRate" value="8.0" step="0.01">
                </div>
                <div class="input-group">
                    <label for="dividendYieldRate">Expected Dividend Yield (%)</label>
                    <input type="number" id="dividendYieldRate" value="3.5" step="0.01">
                </div>
                <div class="input-group">
                    <label for="marginalTaxRate">Marginal Tax Rate (%)</label>
                    <input type="number" id="marginalTaxRate" value="40.0" step="0.01">
                </div>
                <div class="input-group">
                    <label for="inflationRate">Inflation Rate (%)</label>
                    <input type="number" id="inflationRate" value="2.0" step="0.01">
                </div>
                
                <h2>Strategy Options</h2>
                <div class="input-group checkbox">
                    <input type="checkbox" id="useRentalCashDamming" checked>
                    <label for="useRentalCashDamming">Use Rental Cash Damming</label>
                </div>
                <div class="input-group checkbox">
                    <input type="checkbox" id="useSmithManoeuvre" checked>
                    <label for="useSmithManoeuvre">Use Smith Manoeuvre</label>
                </div>
                <div class="input-group checkbox">
                    <input type="checkbox" id="useCapitalizeInterest" checked>
                    <label for="useCapitalizeInterest">Capitalize HELOC Interest</label>
                </div>
                <div class="input-group checkbox">
                    <input type="checkbox" id="useDividendsToPayMortgage" checked>
                    <label for="useDividendsToPayMortgage">Use Dividends to Pay Down Mortgage</label>
                </div>
                <div class="input-group checkbox">
                    <input type="checkbox" id="useTaxRefundToPayMortgage" checked>
                    <label for="useTaxRefundToPayMortgage">Use Tax Refunds to Pay Down Mortgage</label>
                </div>
                
                <div class="input-group">
                    <label for="simulationYears">Simulation Length (years)</label>
                    <input type="number" id="simulationYears" value="25">
                </div>
                
                <button id="calculateBtn">Calculate</button>
            </div>
            
            <div class="results-section">
                <h2>Results</h2>
                <div class="summary-results">
                    <div class="result-card">
                        <h3>Mortgage Acceleration</h3>
                        <div class="result-item">
                            <span>Original Payoff Time:</span>
                            <span id="originalPayoffTime">-</span>
                        </div>
                        <div class="result-item">
                            <span>With Strategy Payoff Time:</span>
                            <span id="strategyPayoffTime">-</span>
                        </div>
                        <div class="result-item">
                            <span>Years Saved:</span>
                            <span id="yearsSaved">-</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Interest Savings</h3>
                        <div class="result-item">
                            <span>Total Original Interest:</span>
                            <span id="originalInterest">-</span>
                        </div>
                        <div class="result-item">
                            <span>Total Strategy Interest:</span>
                            <span id="strategyInterest">-</span>
                        </div>
                        <div class="result-item">
                            <span>Interest Savings:</span>
                            <span id="interestSavings">-</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Investment Growth</h3>
                        <div class="result-item">
                            <span>Investment Portfolio Value:</span>
                            <span id="investmentValue">-</span>
                        </div>
                        <div class="result-item">
                            <span>HELOC Balance:</span>
                            <span id="helocBalance">-</span>
                        </div>
                        <div class="result-item">
                            <span>Net Investment Worth:</span>
                            <span id="netInvestmentValue">-</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Tax Benefits</h3>
                        <div class="result-item">
                            <span>Total Tax Deductions:</span>
                            <span id="totalTaxDeductions">-</span>
                        </div>
                        <div class="result-item">
                            <span>Total Tax Refunds:</span>
                            <span id="totalTaxRefunds">-</span>
                        </div>
                        <div class="result-item">
                            <span>Average Annual Tax Refund:</span>
                            <span id="avgAnnualRefund">-</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Rental Cash Flow</h3>
                        <div class="result-item">
                            <span>Monthly Cash Flow (Original):</span>
                            <span id="originalMonthlyCashFlow">-</span>
                        </div>
                        <div class="result-item">
                            <span>Monthly Cash Flow (With Strategy):</span>
                            <span id="strategyMonthlyCashFlow">-</span>
                        </div>
                        <div class="result-item">
                            <span>Monthly Cash Flow Improvement:</span>
                            <span id="cashFlowImprovement">-</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Net Worth Impact</h3>
                        <div class="result-item">
                            <span>Net Worth (Original Strategy):</span>
                            <span id="originalNetWorth">-</span>
                        </div>
                        <div class="result-item">
                            <span>Net Worth (With Strategy):</span>
                            <span id="strategyNetWorth">-</span>
                        </div>
                        <div class="result-item">
                            <span>Net Worth Improvement:</span>
                            <span id="netWorthImprovement">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-wrapper">
                        <canvas id="mortgageBalanceChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="investmentGrowthChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="cashFlowChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="netWorthChart"></canvas>
                    </div>
                </div>
                
                <div class="annual-breakdown">
                    <h3>Annual Breakdown</h3>
                    <div class="table-wrapper">
                        <table id="annualBreakdownTable">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th>Mortgage Balance</th>
                                    <th>HELOC Balance</th>
                                    <th>Investment Value</th>
                                    <th>Tax Refund</th>
                                    <th>Net Worth</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="calculator.js"></script>
</body>
</html>